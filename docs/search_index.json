[["index.html", "Umatilla Sub-Basin Chapter 1 Introduction 1.1 Project Goals 1.2 Project Outline 1.3 The Umatilla Sub-Basin", " Umatilla Sub-Basin Shelby Sawyer 4/29/2021 Chapter 1 Introduction 1.1 Project Goals The main objective of this project is to demonstrate some of the skills Ive learned in WILD6900: Computational Tools for Reproducible Science. In the following chapters, I will explore the open-source data from DeBano et al., 2016 and try to answer some questions about the Umatilla Sub-Basin. 1.2 Project Outline This book is composed of the following Chapters: Chapter 2, Database Creation Chapter 3, Stream Reach Temperature across the Elevation Gradient Chapter 4, Agricultural Intensity of Reach Locations Chapter 5, Climate Change - Priority Reaches 1.3 The Umatilla Sub-Basin The Umatilla River is located in northern Oregon, USA. The river flows roughly 89 miles from the Blue Mountains before joining with the Colombia River at Lake Umatilla, a large reservoir formed by the John Day Dam. The Umatilla provides water for drinking, agricultural irrigation, and recreation, as well as significant fish and wildlife habitat. Notably, the river supports populations of native Chinook salmon, Coho salmon, and steelhead, making it a popular destination for anglers. It also serves as a valuable cultural resource to the Umatilla Indian Reservation. "],["database-creation.html", "Chapter 2 Database Creation 2.1 Reaches 2.2 Flows", " Chapter 2 Database Creation This database is sourced from the open-source data provided by DeBano et al., 2016, which I accessed through Dryad. This data was collected to better understand the influences of climate change and agriculture on aquatic habitat in the Umatilla Sub-Basin. I used a relational database to house my data: The database has 2 tables: reaches and flows. The reaches table contains information on the individual reaches with temperature data available, including what river the reach belongs to, the GPS location of the reach, the elevation, and the temperature. The flows table contains information on individual reaches that I have information on flows for, including reach length, upstream drainage area, the current flow rate, the predicted flow rates for years 2040 and 2080, and the land use setting. Primary keys are shown in italics and foreign keys are shown in bold. I created a database in RSQLite to house the data. library(DBI) library(tidyverse) ## -- Attaching packages --------------------------------------- tidyverse 1.3.0 -- ## v ggplot2 3.3.3 v purrr 0.3.4 ## v tibble 3.1.0 v dplyr 1.0.5 ## v tidyr 1.1.3 v stringr 1.4.0 ## v readr 1.4.0 v forcats 0.5.1 ## Warning: package &#39;ggplot2&#39; was built under R version 4.0.5 ## Warning: package &#39;dplyr&#39; was built under R version 4.0.5 ## -- Conflicts ------------------------------------------ tidyverse_conflicts() -- ## x dplyr::filter() masks stats::filter() ## x dplyr::lag() masks stats::lag() UmatillaSubBasin_db &lt;-dbConnect(RSQLite::SQLite(), &quot;../UmatillaSubBasin.db&quot;) 2.1 Reaches First, I created the reaches table with reach_name as the primary key. dbExecute(UmatillaSubBasin_db, &quot;CREATE TABLE reaches ( reach_name, river_name, lat, long, elevation_m, temp_rank PRIMARY KEY (reach_name) );&quot;) Then, I loaded the reaches data from a csv into the reaches table. reaches &lt;- read.csv(&quot;../data/reaches.csv&quot;, stringsAsFactors = FALSE) names(reaches) ## [1] &quot;reach_name&quot; &quot;river_name&quot; &quot;lat&quot; &quot;long&quot; &quot;elevation_m&quot; ## [6] &quot;temp_rank&quot; names(reaches)[1]&lt;- &quot;reach_name&quot; Next, I imported the data into the table and ran a query to make sure it was reading correctly. dbWriteTable(UmatillaSubBasin_db, &quot;reaches&quot;, reaches, append = TRUE) reaches &lt;- dbGetQuery(UmatillaSubBasin_db, &quot;SELECT * FROM reaches;&quot;) reaches ## reach_name river_name lat long ## 1 Buck Cr3 Buck Creek 45.70822 -118.1374 ## 2 Buckaroo Cr3 Buckaroo Creek 45.65041 -118.4947 ## 3 Butter Cr7 Butter Creek 45.58120 -119.4191 ## 4 Camp Cr3 Camp Creek 45.58520 -118.3135 ## 5 Coonskin Cr3 Coonskin Creek 45.67484 -118.5448 ## 6 Eagle Cr Eagle Creek 45.76249 -118.4455 ## 7 Greasewood Cr1 Greasewood Creek 45.73923 -118.6143 ## 8 McKay Cr1 McCay Creek 45.66801 -118.8382 ## 9 McKay Cr3 McCay Creek 45.60793 -118.7953 ## 10 McKay Cr5 McCay Creek 45.60793 -118.7953 ## 11 McKay NF Cr1 McCay Creek (North Fork) 45.50695 -118.6168 ## 12 Meacham Cr12 Meacham Creek 45.50297 -118.4221 ## 13 Meacham Cr3 Meacham Creek 45.64309 -118.3592 ## 14 Meacham Cr4 Meacham Creek 45.56971 -118.3181 ## 15 Mission Cr5 Mission Creek 45.66021 -118.6417 ## 16 Mission Cr7 Mission Creek 45.62949 -118.6200 ## 17 Moonshine Cr3 Moonshine Creek 45.65989 -118.5663 ## 18 Ryan Cr Ryan Creek 45.71088 -118.3122 ## 19 Spring Hollow Cr2 (WH) Spring Hollow Creek 45.75295 -118.5147 ## 20 Spring Hollow Cr4 (WH) Spring Hollow Creek 45.74638 -118.4873 ## 21 Squaw Cr1 Umatilla River 45.69998 -118.4003 ## 22 Squaw Cr3 Isqauulktpe Creek 45.67212 -118.4014 ## 23 Stage Gulch1 Stanfield Drain 45.78324 -119.2354 ## 24 Thomas Cr1 Thomas Creek 45.68008 -118.1974 ## 25 UM NF1 Umatilla River (North Fork) 45.73244 -118.1409 ## 26 UM NF2 Umatilla River (North Fork) 45.72920 -118.1125 ## 27 UM15 Umatilla River 45.79554 -119.3278 ## 28 UM16 Umatilla River 45.78366 -119.2372 ## 29 UM17 Umatilla River 45.77854 -119.2255 ## 30 UM21 Umatilla River 45.72815 -119.1936 ## 31 UM23 Umatilla River 45.72140 -119.1789 ## 32 UM25 Umatilla River 45.69100 -119.1193 ## 33 UM26 Umatilla River 45.67706 -119.0367 ## 34 UM27 Umatilla River 45.67691 -119.0055 ## 35 UM28 Umatilla River 45.66329 -118.9709 ## 36 UM29 Umatilla River 45.65837 -118.8748 ## 37 UM32 Umatilla River 45.67119 -118.8376 ## 38 UM33 Umatilla River 45.67589 -118.7826 ## 39 UM34 Umatilla River 45.67360 -118.7531 ## 40 UM37 Umatilla River 45.67195 -118.6204 ## 41 UM38 Umatilla River 45.67850 -118.5781 ## 42 UM39 Umatilla River 45.67594 -118.5522 ## 43 UM40 Umatilla River 45.68383 -118.5385 ## 44 UM41 Thornhollow 45.68460 -118.4554 ## 45 UM43 Imeques Acclimation Facility 45.70675 -118.3502 ## 46 UM45 Umatilla River 45.72342 -118.3189 ## 47 UM46 Umatilla River 45.72280 -118.3146 ## 48 UM47 Umatilla River 45.72232 -118.2978 ## 49 UM50 Umatilla River 45.74221 -118.2410 ## 50 UM53 Umatilla River 45.72873 -118.1970 ## 51 UM6 Hermistron North Drain 45.86147 -119.3141 ## 52 UM7 Umatilla River 45.83983 -119.3356 ## 53 Wildhorse Cr1 Wildhorse Creek 45.67854 -118.7653 ## 54 Wildhorse Cr13 Wildhorse Creek 45.74721 -118.3842 ## 55 Wildhorse Cr3 Wildhorse Creek 45.68565 -118.7472 ## 56 Wildhorse Cr6 Wildhorse Creek 45.73854 -118.6131 ## 57 Wildhorse Cr8 Wildhorse Creek 45.80879 -118.5000 ## elevation_m temp_rank ## 1 1215.3084 1.500000 ## 2 585.5771 3.512500 ## 3 403.8002 3.742857 ## 4 809.9625 2.370000 ## 5 504.9989 2.300000 ## 6 662.5066 3.000000 ## 7 425.5647 3.500000 ## 8 329.2695 2.094737 ## 9 364.2788 2.400000 ## 10 389.8175 2.400000 ## 11 582.7155 3.450000 ## 12 1119.4525 3.300000 ## 13 636.8636 2.428571 ## 14 691.8829 2.200000 ## 15 467.0347 1.500000 ## 16 547.7356 1.542857 ## 17 626.2425 3.450000 ## 18 803.7913 1.500000 ## 19 538.1581 2.800000 ## 20 581.4279 3.200000 ## 21 515.6957 3.500000 ## 22 555.8124 2.633333 ## 23 178.0883 3.500000 ## 24 837.2876 1.540000 ## 25 755.7911 1.333333 ## 26 886.4680 1.400000 ## 27 164.6618 3.968750 ## 28 169.3329 3.471429 ## 29 180.0052 3.400000 ## 30 198.1235 3.518750 ## 31 209.5341 3.500000 ## 32 219.5095 3.515000 ## 33 229.3227 3.484615 ## 34 245.6639 3.500000 ## 35 269.9384 3.239130 ## 36 291.4514 2.616667 ## 37 306.0011 3.944444 ## 38 321.4170 3.833333 ## 39 348.7565 3.625000 ## 40 403.5500 3.566667 ## 41 418.2444 3.500000 ## 42 430.9405 3.483333 ## 43 455.2603 3.487500 ## 44 495.2198 3.457143 ## 45 544.9147 3.442857 ## 46 571.8146 3.350000 ## 47 585.8170 3.223077 ## 48 603.0432 2.900000 ## 49 651.4458 1.727273 ## 50 703.4319 1.500000 ## 51 125.2695 3.833333 ## 52 130.7791 3.625000 ## 53 333.7985 3.750000 ## 54 765.4791 3.200000 ## 55 359.4224 3.833333 ## 56 445.3358 3.500000 ## 57 497.2034 3.433333 dbGetQuery(UmatillaSubBasin_db, &quot;SELECT * FROM reaches LIMIT 10;&quot;) ## reach_name river_name lat long elevation_m temp_rank ## 1 Buck Cr3 Buck Creek 45.70822 -118.1374 1215.3084 1.500000 ## 2 Buckaroo Cr3 Buckaroo Creek 45.65041 -118.4947 585.5771 3.512500 ## 3 Butter Cr7 Butter Creek 45.58120 -119.4191 403.8002 3.742857 ## 4 Camp Cr3 Camp Creek 45.58520 -118.3135 809.9625 2.370000 ## 5 Coonskin Cr3 Coonskin Creek 45.67484 -118.5448 504.9989 2.300000 ## 6 Eagle Cr Eagle Creek 45.76249 -118.4455 662.5066 3.000000 ## 7 Greasewood Cr1 Greasewood Creek 45.73923 -118.6143 425.5647 3.500000 ## 8 McKay Cr1 McCay Creek 45.66801 -118.8382 329.2695 2.094737 ## 9 McKay Cr3 McCay Creek 45.60793 -118.7953 364.2788 2.400000 ## 10 McKay Cr5 McCay Creek 45.60793 -118.7953 389.8175 2.400000 2.2 Flows I created the flows table with reach_name as the foreign key. dbExecute(UmatillaSubBasin_db, &quot;CREATE TABLE flows ( reach_name, reach_length_m, drainage_ha, currentflow_cfs, lowflow_2040_cfs, lowflow_2080_cfs, system_id, FOREIGN KEY(reach_name) REFERENCES reaches(reach_name) );&quot;) Next, I loaded the flows data from a csv into the flows table. flows &lt;- read.csv(&quot;../data/flows.csv&quot;, stringsAsFactors = FALSE) Then, I imported the data into the table. This table only stores information on the reaches where temperature was sampled. I also ran a query to check that it was working properly. dbWriteTable(UmatillaSubBasin_db, &quot;flows&quot;, flows, append = TRUE) flows &lt;- dbGetQuery(UmatillaSubBasin_db, &quot;SELECT * FROM flows;&quot;) dbGetQuery(UmatillaSubBasin_db, &quot;SELECT * FROM flows LIMIT 10;&quot;) ### reach_name reach_length_m drainage_ha currentflow_cfs lowflow_2040_cfs # 1 Bachelor Canyon 1370.08 778.40 1.63 1.49 # 2 Bassey Cr 8754.77 1559.67 2.54 2.29 # 3 Bear (UM) 4651.86 1159.99 2.10 1.91 # 4 Bear Cr (McKay) 1473.40 537.70 0.98 0.90 # 5 Bear Cr1 (Birch) 5253.53 10949.60 18.75 17.08 # 6 Bear Cr1 (Meacham) 1816.61 3255.40 6.50 5.95 # 7 Bear Cr2 (Birch) 17442.18 3343.84 6.20 5.63 # 8 Bear Cr2 (Meacham) 4066.95 1735.04 3.25 2.97 # 9 Beaver Cr1 1889.15 2033.90 4.27 3.91 #10 Beaver Cr3 238.66 1211.95 1.79 1.64 #########lowflow_2080_cfs # 1 1.41 # 2 2.14 # 3 1.76 # 4 0.86 # 5 16.23 # 6 5.52 # 7 5.39 # 8 2.75 # 9 3.67 # 10 1.54 "],["stream-reach-temperatures-by-elevation.html", "Chapter 3 Stream Reach Temperatures by Elevation", " Chapter 3 Stream Reach Temperatures by Elevation The sampled reaches are associated with different elevations throughout the watershed. I will map the distribution here and color code points by which river they belong to. library(ggplot2) reaches %&gt;% ggplot(aes(y = elevation_m, x = temp_rank, color = river_name)) + geom_point() + theme_minimal() + labs(fill = &#39;Total Upstream Drainage Area (sqKm)&#39;, y = &#39;Elevation (m)&#39;, x = &#39;Temperature (m)&#39;, color = &#39;River&#39;) + theme(legend.position = &quot;bottom&quot;) As expected, the temperature rank for the sampled reaches tends to be higher in lower elevations. This would be helpful if I was trying to understand how temperature changes throughout a river as elevation decreases and rivers gain more tributaries. "],["land-use-of-area-surrounding-reaches.html", "Chapter 4 Land Use of Area Surrounding Reaches", " Chapter 4 Land Use of Area Surrounding Reaches Each reach was given an associated land use. I mapped these to understand if certain areas of the watershed were dominated by a specific land use / agricultural intensity. flows %&gt;% left_join(reaches, by = &quot;reach_name&quot;) %&gt;% ggplot(aes(x = long, y = lat, color = system_id)) + geom_point() + theme_minimal() + labs( fill = &#39;Agricultural Intensity&#39;, x = &#39;Decimal Degrees&#39;, y = &#39;Decimal Degrees&#39;, color = &#39;Agricultural Intensity&#39;) + theme_minimal() ## Warning: Removed 227 rows containing missing values (geom_point). This map shows me that certain areas are dominated by single land uses. For example, I can see that the upper reaches are associated with non-agricultural land use. As we travel downstream, we go through an area of non-irrigated agricultural land, then a small urban area, and then the lower reaches are associated mostly with irrigated agriculture. Agriculture-dominated landscapes, particularly those that are irrigated by drawing water from the river, can be detrimental to the quality of wildlife habitat in that riverscape. Therefore, understanding where irrigated agriculture and other land uses fall within the watershed is an important part of understanding the overall watershed setting. "],["chapter-5-priority-reaches.html", "Chapter 5 Chapter 5: Priority Reaches", " Chapter 5 Chapter 5: Priority Reaches Climate change is expected to significantly influence natural flows in the coming years. I determined the top 10 reaches in my watershed that will experience the greatest decrease (as a percent) in projected low flow rates between 2040 and 2080 and create a csv file with their information attached. flows$difference &lt;- ((flows$lowflow_2040_cfs - flows$lowflow_2080_cfs) / flows$lowflow_2040_cfs) * 100 flows_sort &lt;- flows[order(-flows$difference),] flows_top10 &lt;- flows_sort[1:10,] write.csv(flows_top10, &quot;data\\\\flows_top10.csv&quot;, row.names = FALSE) Having a list of the top 10 reaches that are predicted to experience the greatest decrease in low flows helps natural resource managers make decisions about how to prioritize conservation funding and efforts. "],["chapter-6-references.html", "Chapter 6 Chapter 6: References", " Chapter 6 Chapter 6: References DeBano, Sandra J. et al. (2016), Interactive influences of climate change and agriculture on aquatic habitat in a Pacific Northwestern watershed, Ecosphere, Article-journal, https://doi.org/10.1002/ecs2.1357 "]]
